<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Week 12 Listening Practice</title>
  <!-- æ‰‹æ©Ÿæ­£ç¢ºç¸®æ”¾ -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, "Microsoft JhengHei", sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 16px;
      line-height: 1.7;
      font-size: 18px; /* æ•´é«”å­—é«”æ”¾å¤§ */
    }
    h1, h2 {
      text-align: center;
      margin: 10px 0;
    }
    h1 {
      font-size: 1.6rem;
    }
    h2 {
      font-size: 1.3rem;
    }

    .section {
      max-width: 900px;
      margin: 16px auto;
      background: #ffffff;
      border-radius: 14px;
      padding: 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .card {
      border-radius: 12px;
      padding: 14px 14px;
      margin-bottom: 14px;
      background: #fafafa;
      border: 1px solid #e0e0e0;
    }

    .title-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }
    .title-row span.label {
      font-weight: bold;
      font-size: 1.1rem;
    }

    .subtitle {
      color: #555;
      font-size: 0.95rem;
      margin-bottom: 8px;
    }

    .lines {
      margin-left: 4px;
      margin-bottom: 4px;
    }
    .en {
      font-weight: bold;
      font-size: 1rem;     /* è‹±æ–‡ç¨å¾®å¤§ä¸€é» */
    }
    .zh {
      color: #444;
      margin-bottom: 6px;
      font-size: 0.95rem;  /* ä¸­æ–‡ä¹ŸåŠ å¤§ */
    }

    button.play-btn {
      padding: 8px 14px;
      border-radius: 999px;
      border: 1px solid #1976d2;
      background: #2196f3;
      color: #fff;
      cursor: pointer;
      font-size: 1rem;
      min-width: 140px;
    }
    button.play-btn:hover {
      background: #1976d2;
    }

    .controls {
      max-width: 900px;
      margin: 10px auto 0;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.95rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    select {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #ccc;
      font-size: 0.95rem;
    }

    .now-playing {
      text-align: center;
      font-size: 0.9rem;
      color: #666;
      margin-top: 4px;
    }

    /* æ¯å¼µå¡ç‰‡è‡ªå·±çš„é€²åº¦æ¢ */
    .progress-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
      font-size: 0.9rem;
    }
    .progressBar {
      flex: 1;
      -webkit-appearance: none;
      appearance: none;
      height: 8px;
      border-radius: 999px;
      background: #ddd;
      outline: none;
    }
    .progressBar::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #2196f3;
      cursor: pointer;
    }
    .progressBar::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #2196f3;
      cursor: pointer;
      border: none;
    }
    .timeLabel {
      min-width: 110px;
      text-align: right;
      color: #555;
    }

    /* æ‰‹æ©Ÿå°è¢å¹•å„ªåŒ– */
    @media (max-width: 600px) {
      body {
        padding: 10px;
        font-size: 18px;
      }
      .section {
        padding: 12px;
        margin: 10px auto;
      }
      .card {
        padding: 12px;
      }
      .title-row {
        flex-direction: column;
        align-items: flex-start;
      }
      button.play-btn {
        width: 100%;       /* æŒ‰éˆ•æ•´æ’ï¼Œå¥½æŒ‰ */
        text-align: center;
      }
      .lines {
        margin-left: 0;
      }
      .progress-wrapper {
        flex-direction: row;
      }
    }
  </style>
</head>
<body>

<h1>Week 12 Listening Practice</h1>

<!-- æ’­æ”¾é€Ÿåº¦ -->
<div class="controls">
  <span>Playback speed æ’­æ”¾é€Ÿåº¦ï¼š</span>
  <select id="speedSelect">
    <option value="1">1.0Ã—</option>
    <option value="0.8">0.8Ã— (æ…¢ä¸€é»)</option>
  </select>
</div>
<div class="now-playing" id="nowPlaying">Now playing: (none)</div>

<!-- å…±ç”¨ audio -->
<audio id="audioPlayer"></audio>

<!-- ---------------------- æ˜ŸæœŸä¸€ --------------------------- -->
<div class="section">
  <h2>æ˜ŸæœŸä¸€ â€” Community Helpers</h2>

  <!-- Firefighter -->
  <div class="card">
    <div class="title-row">
      <span class="label">ğŸ”¥ Firefighter æ¶ˆé˜²å“¡</span>
      <button class="play-btn" data-audio="Firefighter.mp3">â–¶ Play Firefighter</button>
    </div>
    <div class="subtitle">Speaker 1 & Speaker 2</div>

    <!-- é€™å¼µå¡ç‰‡è‡ªå·±çš„é€²åº¦æ¢ -->
    <div class="progress-wrapper">
      <input type="range" class="progressBar" min="0" max="100" value="0">
      <span class="timeLabel">0:00 / 0:00</span>
    </div>

    <div class="lines">
      <div class="en">Speaker 1: I work in a fire station.</div>
      <div class="zh">æˆ‘åœ¨æ¶ˆé˜²éšŠå·¥ä½œã€‚</div>

      <div class="en">Speaker 1: I fight fires.</div>
      <div class="zh">æˆ‘å°æŠ—ç«ç½ã€‚</div>

      <div class="en">Speaker 1: I drive a big red truck.</div>
      <div class="zh">æˆ‘é–‹ä¸€å°å¤§ç´…è‰²æ¶ˆé˜²è»Šã€‚</div>

      <div class="en">Speaker 1: Who am I?</div>
      <div class="zh">æˆ‘æ˜¯èª°ï¼Ÿ</div>

      <br>
      <div class="en">Speaker 2: You are a firefighter.</div>
      <div class="zh">ä½ æ˜¯æ¶ˆé˜²å“¡ã€‚</div>
    </div>
  </div>

  <!-- Police Officer -->
  <div class="card">
    <div class="title-row">
      <span class="label">ğŸš“ Police Officer è­¦å¯Ÿ</span>
      <button class="play-btn" data-audio="Police Officer.mp3">â–¶ Play Police Officer</button>
    </div>
    <div class="subtitle">Speaker 1 & Speaker 2</div>

    <div class="progress-wrapper">
      <input type="range" class="progressBar" min="0" max="100" value="0">
      <span class="timeLabel">0:00 / 0:00</span>
    </div>

    <div class="lines">
      <div class="en">Speaker 1: I work in a police station.</div>
      <div class="zh">æˆ‘åœ¨è­¦å¯Ÿå±€å·¥ä½œã€‚</div>

      <div class="en">Speaker 1: I keep people safe.</div>
      <div class="zh">æˆ‘ä¿è­·å¤§å®¶çš„å®‰å…¨ã€‚</div>

      <div class="en">Speaker 1: I wear a blue uniform.</div>
      <div class="zh">æˆ‘ç©¿è‘—è—è‰²åˆ¶æœã€‚</div>

      <div class="en">Speaker 1: Who am I?</div>
      <div class="zh">æˆ‘æ˜¯èª°ï¼Ÿ</div>

      <br>
      <div class="en">Speaker 2: You are a police officer.</div>
      <div class="zh">ä½ æ˜¯è­¦å¯Ÿã€‚</div>
    </div>
  </div>

  <!-- Chef -->
  <div class="card">
    <div class="title-row">
      <span class="label">ğŸ³ Chef å»šå¸«</span>
      <button class="play-btn" data-audio="Chef.mp3">â–¶ Play Chef</button>
    </div>
    <div class="subtitle">Speaker 1 & Speaker 2</div>

    <div class="progress-wrapper">
      <input type="range" class="progressBar" min="0" max="100" value="0">
      <span class="timeLabel">0:00 / 0:00</span>
    </div>

    <div class="lines">
      <div class="en">Speaker 1: I work in a kitchen.</div>
      <div class="zh">æˆ‘åœ¨å»šæˆ¿å·¥ä½œã€‚</div>

      <div class="en">Speaker 1: I cook delicious food.</div>
      <div class="zh">æˆ‘ç…®ç¾å‘³çš„é£Ÿç‰©ã€‚</div>

      <div class="en">Speaker 1: I wear a tall white hat.</div>
      <div class="zh">æˆ‘æˆ´è‘—é«˜é«˜çš„ç™½å¸½å­ã€‚</div>

      <div class="en">Speaker 1: Who am I?</div>
      <div class="zh">æˆ‘æ˜¯èª°ï¼Ÿ</div>

      <br>
      <div class="en">Speaker 2: You are a chef.</div>
      <div class="zh">ä½ æ˜¯å»šå¸«ã€‚</div>
    </div>
  </div>

  <!-- Teacher -->
  <div class="card">
    <div class="title-row">
      <span class="label">ğŸ« Teacher è€å¸«</span>
      <button class="play-btn" data-audio="Teacher.mp3">â–¶ Play Teacher</button>
    </div>
    <div class="subtitle">Speaker 1 & Speaker 2</div>

    <div class="progress-wrapper">
      <input type="range" class="progressBar" min="0" max="100" value="0">
      <span class="timeLabel">0:00 / 0:00</span>
    </div>

    <div class="lines">
      <div class="en">Speaker 1: I work in a school.</div>
      <div class="zh">æˆ‘åœ¨å­¸æ ¡å·¥ä½œã€‚</div>

      <div class="en">Speaker 1: I teach students.</div>
      <div class="zh">æˆ‘æ•™å­¸ç”Ÿã€‚</div>

      <div class="en">Speaker 1: I write on the board.</div>
      <div class="zh">æˆ‘åœ¨é»‘æ¿ä¸Šå¯«å­—ã€‚</div>

      <div class="en">Speaker 1: Who am I?</div>
      <div class="zh">æˆ‘æ˜¯èª°ï¼Ÿ</div>

      <br>
      <div class="en">Speaker 2: You are a teacher.</div>
      <div class="zh">ä½ æ˜¯è€å¸«ã€‚</div>
    </div>
  </div>
</div>

<!-- ---------------------- æ˜ŸæœŸä¸‰ --------------------------- -->
<div class="section">
  <h2>æ˜ŸæœŸä¸‰ â€” 4W Trip Conversation</h2>

  <div class="card">
    <div class="title-row">
      <span class="label">ğŸ§ 4W å‹•ç‰©åœ’æ ¡å¤–æ•™å­¸</span>
      <button class="play-btn" data-audio="4w.mp3">â–¶ Play 4W Trip</button>
    </div>

    <div class="progress-wrapper">
      <input type="range" class="progressBar" min="0" max="100" value="0">
      <span class="timeLabel">0:00 / 0:00</span>
    </div>

    <div class="lines">
      <div class="en">Speaker 1: Where did you go?</div>
      <div class="zh">ä½ å»äº†å“ªè£¡ï¼Ÿ</div>

      <div class="en">Speaker 2: I went to the zoo.</div>
      <div class="zh">æˆ‘å»äº†å‹•ç‰©åœ’ã€‚</div><br>

      <div class="en">Speaker 1: What did you do?</div>
      <div class="zh">ä½ åšäº†ä»€éº¼ï¼Ÿ</div>

      <div class="en">Speaker 2: I played games and took pictures with my friends.</div>
      <div class="zh">æˆ‘ç©éŠæˆ²ä¸¦å’Œæœ‹å‹ä¸€èµ·æ‹ç…§ã€‚</div><br>

      <div class="en">Speaker 1: Who did you see?</div>
      <div class="zh">ä½ çœ‹åˆ°äº†èª°ï¼Ÿ</div>

      <div class="en">Speaker 2: I saw my friends, my teacher, and some parents.</div>
      <div class="zh">æˆ‘çœ‹åˆ°æœ‹å‹ã€è€å¸«å’Œä¸€äº›å®¶é•·ã€‚</div><br>

      <div class="en">Speaker 1: How did you feel on the trip?</div>
      <div class="zh">ä½ åœ¨æ—…é€”ä¸­æ„Ÿè¦ºå¦‚ä½•ï¼Ÿ</div>

      <div class="en">Speaker 2: I felt very happy and excited.</div>
      <div class="zh">æˆ‘æ„Ÿåˆ°éå¸¸é–‹å¿ƒåˆèˆˆå¥®ã€‚</div>
    </div>
  </div>
</div>

<script>
  const player = document.getElementById('audioPlayer');
  const speedSelect = document.getElementById('speedSelect');
  const nowPlaying = document.getElementById('nowPlaying');

  let currentCard = null; // ç›®å‰æ­£åœ¨æ’­æ”¾çš„é‚£å¼µå¡ç‰‡

  function formatTime(sec) {
    if (!isFinite(sec)) return "0:00";
    const m = Math.floor(sec / 60);
    const s = Math.floor(sec % 60);
    return m + ":" + (s < 10 ? "0" + s : s);
  }

  speedSelect.addEventListener('change', function () {
    player.playbackRate = parseFloat(this.value);
  });

  // æ‰¾å‡ºæŸå¼µå¡ç‰‡çš„é€²åº¦æ¢èˆ‡æ™‚é–“æ¨™ç±¤
  function getCardUI(card) {
    if (!card) return {};
    return {
      progressBar: card.querySelector('.progressBar'),
      timeLabel: card.querySelector('.timeLabel')
    };
  }

  // æ’­æ”¾æŒ‰éˆ•
  document.querySelectorAll('.play-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const file = btn.getAttribute('data-audio');
      const speed = parseFloat(speedSelect.value);
      const card = btn.closest('.card');

      // å¦‚æœåˆ‡æ›åˆ°å¦ä¸€å¼µå¡ç‰‡ï¼ŒæŠŠå‰ä¸€å¼µæ­¸é›¶
      if (currentCard && currentCard !== card) {
        const { progressBar: prevPB, timeLabel: prevTL } = getCardUI(currentCard);
        if (prevPB) prevPB.value = 0;
        if (prevTL) prevTL.textContent = "0:00 / 0:00";
      }

      const currentSrc = player.src.split('/').pop();
      if (currentSrc === file && currentCard === card) {
        // åŒä¸€å¼µå¡ï¼Œåšæ’­æ”¾/æš«åœåˆ‡æ›
        if (player.paused) {
          player.play();
        } else {
          player.pause();
        }
      } else {
        // æ›æ–°çš„éŸ³æª”æˆ–æ›å¡ç‰‡
        currentCard = card;
        player.src = file;
        player.playbackRate = speed;
        player.play();

        const { progressBar, timeLabel } = getCardUI(currentCard);
        if (progressBar) progressBar.value = 0;
        if (timeLabel) timeLabel.textContent = "0:00 / 0:00";
      }

      nowPlaying.textContent = 'Now playing: ' + file;
    });
  });

  // è¼‰å…¥éŸ³æª”å¾Œï¼Œæ›´æ–°ç¸½é•·åº¦é¡¯ç¤º
  player.addEventListener('loadedmetadata', () => {
    if (!currentCard) return;
    const { timeLabel } = getCardUI(currentCard);
    if (!timeLabel) return;
    const total = player.duration || 0;
    timeLabel.textContent = formatTime(player.currentTime) + " / " + formatTime(total);
  });

  // æ’­æ”¾ä¸­æ›´æ–°å°æ‡‰å¡ç‰‡çš„é€²åº¦æ¢èˆ‡æ™‚é–“
  player.addEventListener('timeupdate', () => {
    if (!currentCard) return;
    if (!isFinite(player.duration) || player.duration === 0) return;

    const { progressBar, timeLabel } = getCardUI(currentCard);
    if (!progressBar || !timeLabel) return;

    const percent = (player.currentTime / player.duration) * 100;
    progressBar.value = percent;
    timeLabel.textContent = formatTime(player.currentTime) + " / " + formatTime(player.duration);
  });

  // æ‹‰å‹•é€²åº¦æ¢ï¼šåªå°ç›®å‰é€™å¼µå¡ç‰‡æœ‰æ•ˆ
  document.querySelectorAll('.progressBar').forEach(pb => {
    pb.addEventListener('input', () => {
      if (!currentCard) return;
      const card = pb.closest('.card');
      if (card !== currentCard) return; // åªå…è¨±æ§åˆ¶æ­£åœ¨æ’­æ”¾çš„é‚£å¼µ
      if (!isFinite(player.duration) || player.duration === 0) return;

      const percent = pb.value;
      const newTime = (percent / 100) * player.duration;
      player.currentTime = newTime;
    });
  });

  player.addEventListener('ended', () => {
    if (!currentCard) return;
    const { progressBar, timeLabel } = getCardUI(currentCard);
    if (progressBar) progressBar.value = 0;
    if (timeLabel) timeLabel.textContent = "0:00 / " + formatTime(player.duration || 0);
    nowPlaying.textContent = 'Now playing: (none)';
  });
</script>

</body>
</html>
